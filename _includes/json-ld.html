<script type="application/ld+json">
{
  "@context": "https://schema.org",
  {%- if page.layout == 'members' -%}
    "@type": "{%- if page.type == 'organisatie' -%}Organization{%- else -%}Person{%- endif -%}",
    "@id": "{{ page.url | absolute_url }}",
    "url": "{{ page.url | absolute_url }}",
    "name": "{{ page.title }}",
    "description": "{{ content | strip_html | truncatewords: 20 | escape }}",
    {%- if page.image -%}
    "image": "{{ page.image | absolute_url }}",
    {%- endif -%}

    {%- if page.website or page.wikidata -%}
    "sameAs": [
        {%- if page.website -%}
            "{{ page.website }}"{%- if page.wikidata -%},{%- endif -%}
        {%- endif -%}
        {%- if page.wikidata -%}
            "https://www.wikidata.org/wiki/{{ page.wikidata }}"
        {%- endif -%}
    ],
    {%- endif -%}

    {%- if page.type == 'persoon' and page.organisaties -%}
    "worksFor": [
        {%- for org in page.organisaties -%}
        {
            "@type": "Organization",
            "name": "{{ org }}"
        }{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
    ],
    {%- endif -%}

    "memberOf": {
        "@type": "Organization",
        "name": "Vereniging Open Nederland",
        "@id": "{{ '/' | absolute_url }}"
    },
    
    "knowsAbout": [
        {%- for tag in page.tags -%}
        "{{ tag }}"{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
    ]

  {%- elsif page.layout == 'initiatives' -%}
    "@type": "CreativeWork",
    "name": "{{ page.title }}",
    "datePublished": "{{ page.year }}",
    "keywords": "{{ page.tags | join: ', ' }}",
    "url": "{{ page.url | absolute_url }}",
    
    {%- if page.website or page.wikidata -%}
    "sameAs": [
        {%- if page.website -%}
            "{{ page.website }}"{%- if page.wikidata -%},{%- endif -%}
        {%- endif -%}
        {%- if page.wikidata -%}
            "https://www.wikidata.org/wiki/{{ page.wikidata }}"
        {%- endif -%}
    ]
    {%- endif -%}

  {%- else -%}
    "@type": "Organization",
    "@id": "{{ '/' | absolute_url }}",
    "name": "Vereniging Open Nederland",
    "url": "{{ '/' | absolute_url }}",
    "logo": "{{ '/assets/img/logo.png' | absolute_url }}",
    "description": "{{ site.description }}",
    "sameAs": [
        "https://twitter.com/opennederland",
        "https://www.wikidata.org/wiki/Q108331393" 
    ]
  {%- endif -%}
}
</script>